{% extends 'base.html' %}
{% block content %}

<style>
.requests-page {
  max-width: 900px;
  margin: 0 auto;
  padding: 16px 12px 80px;
}

.page-title {
  font-size: 22px;
  font-weight: 700;
  margin-bottom: 20px;
  color: #3b2e20;
}

.requests-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.request-card {
  background: rgba(255,255,255,0.7);
  backdrop-filter: blur(10px);
  border-radius: 18px;
  padding: 14px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.12);
}

.request-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.request-title {
  font-size: 15px;
  font-weight: 700;
  color: #3b2e20;
}

.status {
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 600;
}

.status-отправлена { background: #fff3cd; color: #856404; }
.status-новый { background: #e2e3e5; color: #383d41; }
.status-в-работе { background: #d1ecf1; color: #0c5460; }
.status-подтверждена { background: #d4edda; color: #155724; }
.status-отменена { background: #f8d7da; color: #721c24; }

.request-image {
  width: 100%;
  max-height: 180px;
  object-fit: cover;
  border-radius: 14px;
  margin-bottom: 10px;
}

.request-body {
  font-size: 13px;
  color: #4b3a2a;
}

.request-body div {
  margin-bottom: 4px;
}

.request-footer {
  margin-top: 10px;
  font-size: 11px;
  color: #777;
}
</style>

<div class="requests-page">

  <h2 class="page-title">Мои заявки</h2>

  {% if requests|length == 0 %}
    <p>У вас пока нет заявок</p>
  {% else %}
    <div class="requests-list">

      {% for r in requests %}
      <div class="request-card">

        <div class="request-header">
          <div class="request-title">{{ r.title }}</div>
          <span class="status status-{{ r.status|lower }}">{{ r.status }}</span>
        </div>

        {% if r.image %}
          <img src="{{ r.image }}" class="request-image">
        {% endif %}

        <div class="request-body">

          {% if r.type == 'tour' %}
            <div><b>Отель:</b> {{ r.hotel }}</div>
            <div><b>Ночи:</b> {{ r.nights }}</div>
            <div><b>Туристов:</b> {{ r.tourists }}</div>
            <div><b>Цена:</b> {{ r.price }} {{ r.currency }}</div>
          {% endif %}

          {% if r.type == 'transfer' %}
            <div><b>Маршрут:</b> {{ r.from }} → {{ r.to }}</div>
            <div><b>Дата:</b> {{ r.date }} {{ r.time }}</div>
            <div><b>Пассажиры:</b> {{ r.persons }}</div>
            <div><b>Авто:</b> {{ r.car_type }}</div>
          {% endif %}

        </div>

        <div class="request-footer">
          {{ r.created_at }}
        </div>

      </div>
      {% endfor %}

    </div>
  {% endif %}

</div>

{% endblock %}
